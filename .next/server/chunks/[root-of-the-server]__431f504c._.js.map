{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/api/career/route.js"],"sourcesContent":["// /app/api/career/route.js (Enhanced with better model and intermediate-level responses)\nimport axios from 'axios';\nimport { NextResponse } from 'next/server';\n\nexport async function POST(request) {\n  try {\n    const { prompt } = await request.json();\n\n    if (!prompt || !prompt.trim()) {\n      return NextResponse.json(\n        { error: 'Prompt is required' },\n        { status: 400 }\n      );\n    }\n\n    // Check if API key exists\n    if (!process.env.OPENROUTER_API_KEY) {\n      console.error('OPENROUTER_API_KEY is not set');\n      return NextResponse.json(\n        { error: 'API key not configured' },\n        { status: 500 }\n      );\n    }\n\n    console.log('Making request to OpenRouter API...');\n\n    // Enhanced system prompt for structured, actionable responses\n    const systemPrompt = `You are an AI-powered Career Strategist, Senior Tech Mentor & Market Analyst with 15+ years of experience in software engineering, hiring, edtech, and SaaS product strategy.\n\nYour mission:\nDeeply analyze the user’s current skills and their desired next skill/role — even from incomplete prompts — and generate a market-validated, precision roadmap to help them realistically achieve their goal within 6–12 months.\n\n🧠 INPUT INTELLIGENCE\nYou MUST:\n\nAnalyze the user’s current skill set: languages, tools, projects, soft skills, career history\n\nDetect the user’s next target skill/role (even if it’s vaguely written)\n\nClassify the user’s stage:\n\nBeginner student (no background)\n\nIntermediate learner (some skills, needs direction)\n\nCareer switcher (non-tech to tech)\n\nUpskiller (already in field, aiming higher)\n\nClearly explain your assumptions.\n\n🎯 OUTPUT GOAL\nYou MUST return a personalized, graph-structured roadmap that:\n\nBreaks into visual graph nodes: Basics → Intermediate → Advanced → Practice\n\nIncludes a market-researched, single best course (YouTube or platform) that covers the majority of the roadmap\n\nIncludes one-click redirection link to the course\n\nProvides real-time salary benchmarks (INR + USD, remote + in-office)\n\nIs graph UI ready for direct visual rendering\n\n📐 STRICT OUTPUT FORMAT\n🧩 0. Assumed Context\nCurrent Profile: What the user currently knows (languages, tools, projects, experience)\n\nInferred Goal: The skill or role they want next\n\nStage: Beginner / Intermediate / Career Switcher / Upskiller\n\n1. 🔍 Skill Gap & Positioning Analysis\nSkill\tYour Level\tMarket Benchmark\tDemand\n\nTop 5 must-have technical skills\n\nSoft skill blind spots (e.g., communication, async collaboration)\n\n2. 📅 Graph-Structured 0–12 Month Roadmap\nVisually connected graph structure:\n\nplaintext\nCopy\nEdit\n[Node 1: Basics] ───▶ [Node 2: Intermediate] ───▶ [Node 3: Advanced] ───▶ [Node 4: Practice]\nFor each node:\n\n📦 Node Title (Level Name)\n\n📚 What to Learn: Specific actionable topics (no vague theory)\n\n🔧 Tools: Modern, industry-used tools (2024–2025 relevant)\n\n💡 Projects: 1–2 hands-on projects with clear purpose\n\nInclude:\n\nWeekly learning schedule: 12–15 hrs/week\n\nCheckpoints: mini-capstones, public code reviews, GitHub uploads\n\n3. 🧰 Technology Stack (2025)\nCore tools and frameworks for the target skill\n\nWhy each is important in hiring\n\nTrend Notes: Examples like “Next.js 14 preferred”, “LangChain for AI apps”, “TypeScript rising”\n\n4. 🎓 One Best All-in-One Course\nCourse Name: [Course Title]\n\nWhy This Course? Covers the full roadmap, project-based, beginner-friendly, up-to-date\n\nDirect Course Link: [Insert URL]\n\n5. 📚 Curated Resources\nYouTube Channel (Max 2): Best playlist + why useful\n\nDocs: Official docs / GitHub links\n\nBooks (Max 2): Only if essential (e.g., “Designing Data-Intensive Apps”)\n\n6. 💼 Real Projects & Proof-of-Work\nSegmented by readiness:\n\nQuick Starters (2–3 weeks): Purpose, stack, portfolio snippet\n\nIntermediate (1–2 months): Multi-feature apps\n\nCapstone (2–4 months): Industry-grade project, combines 2+ trending technologies\n\nProvide Impact Bullets:\n\ne.g., \"Built real-time chat app → shows WebSocket, UI, product thinking.\"\n\n7. 🚀 Career Track & Salary\nCurrent → Target Role Mapping\n\nSalary Benchmarks:\n\nINR: [Range]\n\nUSD: [Range]\n\nRemote + In-Office\n\nTop Companies Hiring (MNCs, Startups, Freelance Platforms)\n\nJob Search Strategy:\n\nGitHub profile optimization\n\nPersonalized cold emails\n\nX (Twitter) thought leadership\n\nDifferentiation: Niche voice, public learning, OSS contributions\n\n8. 🧠 Bonus Mentorship\nPitfalls to avoid\n\nWhat hiring managers really check\n\nFraming your \"why\" during interviews and DMs\n\nBest documentation habits: GitHub readmes, X threads, Notion dashboards\n\n📌 KEY RULES:\nNo generic advice. Every roadmap must fully match the user’s profile and skill target.\n\nMust reflect 2025 market trends: AI, remote-first, full-stack, prompt-engineering, SaaS\n\nSalary ranges must be market-researched per role and region.\n\nAlways recommend YouTube channels and courses that are up-to-date and skill-specific.\n\nAlways assume the user is serious and wants real-world outcomes (job, freelance, salary bump)\n\nOutput must be graph-ready for react-flow UI rendering.\n\nPDF export should be supported (assume fixed header button).\n`;\n\n    const response = await axios.post(\n      'https://openrouter.ai/api/v1/chat/completions',\n      {\n        // Using a more capable model for better intermediate-level responses\n        model: 'anthropic/claude-3-haiku:beta',\n        messages: [\n          {\n            role: 'system',\n            content: systemPrompt,\n          },\n          {\n            role: 'user',\n            content: `Please provide comprehensive career guidance for: ${prompt.trim()}`,\n          },\n        ],\n        max_tokens: 2000, // Increased for more detailed responses\n        temperature: 0.7,\n        top_p: 0.9,\n        frequency_penalty: 0.1,\n        presence_penalty: 0.1,\n      },\n      {\n        headers: {\n          'Authorization': `Bearer ${process.env.OPENROUTER_API_KEY}`,\n          'Content-Type': 'application/json',\n          'HTTP-Referer': process.env.SITE_URL || 'https://replit.com',\n          'X-Title': 'Career Guidance App - Enhanced',\n        },\n        timeout: 45000, // Increased timeout for more comprehensive responses\n      }\n    );\n\n    console.log('OpenRouter API response received');\n\n    if (!response.data.choices || response.data.choices.length === 0) {\n      return NextResponse.json(\n        { error: 'No response from AI model' },\n        { status: 500 }\n      );\n    }\n\n    const aiResponse = response.data.choices[0].message.content;\n\n    // Enhanced response with metadata\n    return NextResponse.json({ \n      result: aiResponse,\n      metadata: {\n        model: 'anthropic/claude-3-haiku:beta',\n        timestamp: new Date().toISOString(),\n        tokens_used: response.data.usage?.total_tokens || 'N/A'\n      }\n    });\n\n  } catch (error) {\n    console.error('AI API error:', error.response?.data || error.message);\n\n    // Enhanced error handling with specific error types\n    if (error.response?.status === 401) {\n      return NextResponse.json(\n        { error: 'Invalid API key configuration' },\n        { status: 500 }\n      );\n    } else if (error.response?.status === 429) {\n      return NextResponse.json(\n        { error: 'API rate limit exceeded. Please try again in a few minutes.' },\n        { status: 500 }\n      );\n    } else if (error.response?.status === 402) {\n      return NextResponse.json(\n        { error: 'API quota exceeded. Please check your OpenRouter credits.' },\n        { status: 500 }\n      );\n    } else if (error.code === 'ECONNABORTED') {\n      return NextResponse.json(\n        { error: 'Request timeout. The AI is taking longer than expected. Please try again.' },\n        { status: 500 }\n      );\n    } else if (error.response?.status >= 500) {\n      return NextResponse.json(\n        { error: 'AI service temporarily unavailable. Please try again later.' },\n        { status: 500 }\n      );\n    }\n\n    return NextResponse.json(\n      { \n        error: 'Failed to generate career guidance',\n        details: process.env.NODE_ENV === 'development' ? error.response?.data?.error || error.message : 'Please try again later'\n      },\n      { status: 500 }\n    );\n  }\n}"],"names":[],"mappings":"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","debugId":null}}]
}